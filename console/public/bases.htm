<b>Base Rooms</b>
<div style="white-space: nowrap; overflow-x: scroll;">
    <div ng-repeat="(name, room) in data.memory.rooms" ng-if="room.type === 'base'" ng-class="{panel: true, 'panel-primary': !room.unobservable && room.rcl && room.ttd > 1000, 'panel-warning': room.ttd <= 1000, 'panel-danger': room.unobservable || !room.rcl}" style="display: inline-block; width: 300px; margin-right: 10px; vertical-align: top; white-space: normal;">
        <div class="panel-heading">{{name}} ({{room.region}})</div>
        <div class="panel-body">
            <div ng-repeat="(store, storage) in room.store">
                <b>{{store}}</b> {{storage[0].amount}} <img src="https://s3.amazonaws.com/static.screeps.com/upload/mineral-icons/{{storage[0].resource}}.png" /> <span ng-class="{glyphicon: true, 'glyphicon-plus': !expanded[name][store], 'glyphicon-minus': expanded[name][store]}" ng-click="expanded[name][store] = !expanded[name][store]" style="cursor: pointer;" />
                <div ng-repeat="resource in storage" ng-if="expanded[name][store] && $index !== 0" style="margin-left: 50px;">
                    {{resource.amount}} <img src="https://s3.amazonaws.com/static.screeps.com/upload/mineral-icons/{{resource.resource}}.png" />
                </div>
            </div>
            <div ng-if="room.energyCapacityAvailable">
                <div style="display: flex;">
                    <div style="width: max-content; white-space: nowrap;">
                        <b>Energy</b>
                    </div>
                    <div class="progress" style="width: 100%; margin: 0 0 0 5px; break-after: always;">
                        <div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="{{room.energyAvailable.toFixed(0)}}" aria-valuemin="0" aria-valuemax="{{room.energyCapacityAvailable.toFixed(0)}}" style="width: {{(100 * room.energyAvailable / room.energyCapacityAvailable).toFixed(3)}}%; white-space: nowrap; color: black;">
                            {{room.energyAvailable.toFixed(0)}}/{{room.energyCapacityAvailable.toFixed(0)}}
                        </div>
                    </div>
                </div>
            </div>
            <div ng-if="room.towerEnergyCapacity">
                <div style="display: flex;">
                    <div style="width: max-content; white-space: nowrap;">
                        <b>Towers</b>
                    </div>
                    <div class="progress" style="width: 100%; margin: 0 0 0 5px; break-after: always;">
                        <div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="{{room.towerEnergy.toFixed(0)}}" aria-valuemin="0" aria-valuemax="{{room.towerEnergyCapacity.toFixed(0)}}" style="width: {{(100 * room.towerEnergy / room.towerEnergyCapacity).toFixed(3)}}%; white-space: nowrap; color: black;">
                            {{room.towerEnergy.toFixed(0)}}/{{room.towerEnergyCapacity.toFixed(0)}}
                        </div>
                    </div>
                </div>
            </div>
            <div ng-if="room.labEnergyCapacity">
                <div style="display: flex;">
                    <div style="width: max-content; white-space: nowrap;">
                        <b>Labs</b>
                    </div>
                    <div class="progress" style="width: 100%; margin: 0 0 0 5px; break-after: always;">
                        <div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="{{room.labEnergy.toFixed(0)}}" aria-valuemin="0" aria-valuemax="{{room.labEnergyCapacity.toFixed(0)}}" style="width: {{(100 * room.labEnergy / room.labEnergyCapacity).toFixed(3)}}%; white-space: nowrap; color: black;">
                            {{room.labEnergy.toFixed(0)}}/{{room.labEnergyCapacity.toFixed(0)}}
                        </div>
                    </div>
                </div>
            </div>
            <div ng-if="room.buyQueue" style="margin-left: 10px;">
                <b>Buy</b> {{room.buyQueue.amount}} <img src="https://s3.amazonaws.com/static.screeps.com/upload/mineral-icons/{{room.buyQueue.resource}}.png" />
            </div>
            <div ng-if="room.labQueue" style="margin-left: 10px;">
                <b>Create</b> {{room.labQueue.amount}} <img src="https://s3.amazonaws.com/static.screeps.com/upload/mineral-icons/{{room.labQueue.resource}}.png" />
            </div>
            <div ng-if="room.labs.length > 0" style="margin-left: 10px;">
                <div ng-repeat="lab in room.labs" style="display: inline-block; margin-right: 5px;">
                    <span ng-if="lab.amount === 0">Empty</span>
                    <span ng-if="lab.amount > 0">{{lab.amount}} <img src="https://s3.amazonaws.com/static.screeps.com/upload/mineral-icons/{{lab.resource}}.png" /></span>
                </div>
            </div>
            <div ng-if="room.constructionProgressTotal">
                <div style="display: flex;">
                    <div style="width: max-content; white-space: nowrap;">
                        <b>Construction</b>
                    </div>
                    <div class="progress" style="width: 100%; margin: 0 0 0 5px; break-after: always;">
                        <div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="{{room.constructionProgress.toFixed(0)}}" aria-valuemin="0" aria-valuemax="{{room.constructionProgressTotal.toFixed(0)}}" style="width: {{(100 * room.constructionProgress / room.constructionProgressTotal).toFixed(3)}}%; white-space: nowrap; color: black;">
                            {{room.constructionProgress.toFixed(0)}}/{{room.constructionProgressTotal.toFixed(0)}}
                        </div>
                    </div>
                </div>
            </div>
            <div ng-if="room.lowestWall">
                <b>Lowest Wall</b> {{room.lowestWall.hits.toFixed(0)}}
            </div>
            <div ng-repeat="source in room.source">
                <img src="https://s3.amazonaws.com/static.screeps.com/upload/mineral-icons/{{source.resource}}.png" /> {{source.amount}}<span ng-if="source.capacity">/{{source.capacity}}</span>
                <span style="width: max-content; white-space: nowrap;" ng-if="source.ttr">
                    <b>TTR</b> {{source.ttr}}
                </span>
            </div>
            <div ng-repeat="creeps in room.creeps" ng-class="{'text-danger': creeps.count === 0, 'text-warning': creeps.count < creeps.max}">
                <b>{{creeps.role}}</b> {{creeps.count}}/{{creeps.max}}
            </div>
            <div ng-repeat="creep in data.memory.creeps" ng-if="creep.room === name && creep.hits < creep.hitsMax" ng-class="{'text-warning': creep.hits / creep.hitsMax >= 0.8, 'text-danger': creep.hits / creep.hitsMax < 0.8}">
                <b>{{creep.name}}</b> {{creep.x}},{{creep.y}} {{creep.hits}}/{{creep.hitsMax}} {{(100 * creep.hits / creep.hitsMax).toFixed(0)}}%
            </div>
            <div ng-repeat="spawn in data.memory.spawns" ng-if="spawn.room === name && spawn.spawningName">
                <b>Spawning</b> {{spawn.spawningName}} {{spawn.spawningRemainingTime}}/{{spawn.spawningNeedTime}}
            </div>
            <div ng-repeat="hostile in data.memory.hostiles" ng-if="hostile.room === name" ng-class="{'text-warning': hostile.ownerUsername === 'Invader', 'text-danger': hostile.ownerUsername !== 'Invader'}">
                <b>{{hostile.ownerUsername}}</b> {{hostile.x}},{{hostile.y}} {{hostile.hits}}/{{hostile.hitsMax}} {{(100 * hostile.hits / hostile.hitsMax).toFixed(0)}}%
            </div>
        </div>
    </div>
</div>
