var Task=require("task"),Pathing=require("pathing"),Reserve=function(a){this.init(a)};Reserve.prototype=Object.create(Task.prototype);Reserve.prototype.constructor=Reserve;Reserve.prototype.init=function(a){Task.call(this);this.type="reserve";this.force=!0};Reserve.prototype.canAssign=function(a){if(a.spawning||0===a.getActiveBodyparts(CLAIM)||!Game.rooms[a.memory.home].controller||Game.rooms[a.memory.home].controller.my)return!1;Task.prototype.assign.call(this,a);return!0};
Reserve.prototype.run=function(a){a.say("You;spin;me;right;round;baby;right;round;like a;record;baby;right;round;round;round;".split(";")[Game.time%16],!0);!Game.rooms[a.memory.home].controller||Game.rooms[a.memory.home].controller.my||0===a.getActiveBodyparts(CLAIM)?Task.prototype.complete.call(this,a):(Pathing.moveTo(a,Game.rooms[a.memory.home].controller,1),a.reserveController(Game.rooms[a.memory.home].controller),!Memory.signs||!Memory.signs[a.room.name]||a.room.controller.sign&&"roncli"===a.room.controller.sign.username||
a.signController(a.room.controller,Memory.signs[a.room.name]))};Reserve.prototype.toObj=function(a){a.memory.currentTask={type:this.type}};Reserve.fromObj=function(a){return new Reserve};Reserve.getTask=function(a){if(a.room.controller)return new Reserve};Reserve.getRemoteTask=function(a){if(Game.rooms[a.memory.home].controller)return new Reserve};require("screeps-profiler").registerObject(Reserve,"TaskReserve");module.exports=Reserve;